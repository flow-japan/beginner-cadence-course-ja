# 第2章 - 1日目 - 初めてのスマートコントラクト

皆さんこんにちは！この章では、実際にCadenceのコードに飛び込んでいきましょう。

今日は、皆さんにとって初めてのスマートコントラクトを実装し、Cadenceの基本を学びます。これはつまり、変数の宣言の仕方、関数の書き方を学んでいくことを意味します。

## ビデオ

動画で学びたい方は以下の二つをご参照ください。

1. [https://www.youtube.com/watch?v=QbqNM4k76B0](https://www.youtube.com/watch?v=QbqNM4k76B0) (スマートコントラクト、アカウントの概要とどうやってデプロイするか)
2. [https://www.youtube.com/watch?v=DSwNNOEdBXU](https://www.youtube.com/watch?v=DSwNNOEdBXU) (基本的な関数ことコントラクトのデプロイの裏側) 

注意:  00:00 - 07:23を見てみてください。 07:23 以降はこちらのアーティクルではカバーされていません。

## はじめてのスマートコントラクト

皆さんはすでに、第1章1日目を読んでますか？この章には、スマートコントラクトについて知っておくべきことをすべて網羅していますので細かく進めていきましょう。

最初のスマートコントラクトを作り始める前に、まず、どこで作成するかを確認してみましょう。任意のブラウザ（Google Chromeをお勧めします）を起動し、次のURLを貼り付けてFlowプレイグラウンドを開いてください。：[https://play.onflow.org](https://play.onflow.org/)。その後、以下の操作を行います。

1. 左側にある「0x01」タブをクリックします。
2. そのページ内のすべてを削除します。

すると次のように表示がされます。：

![https://github.com/emerald-dao/beginner-cadence-course/raw/main/chapter2.0/images/blanksc.png](https://github.com/emerald-dao/beginner-cadence-course/raw/main/chapter2.0/images/blanksc.png)

この作業は、アドレス0x01のアカウントをクリックし、そのアカウント内のコントラクトを削除したことを意味します。ここで、重要なトピックがあります。

### アドレスとは何でしょうか？

アドレスとは、 `0x`から始まり、その後にランダムな数字や文字が並んでいます。こちらがFlow上のアドレスの例です。：`0xe5a8b7f23e8b548f`

Flowのプレイグラウンドでは、`0x01`.のようなもっと短いアドレスが表示されます。これは、単純化して表示するためにこのようにしています。

アドレスとは何なのでしょうか。アドレスは、アカウントとに近いもので、ブロックチェーン上で何かをしたいとき、アカウントが必要です。すべてのアカウントには、それに関連するアドレスがあります。そのため、`0xe5a8b7f23e8b548f`のようなアドレスは、データの保存や取引の送信などに使用する、ある人のアカウントに過ぎないのです。

### スマートコントラクトはどこにあるのか？

スマートコントラクトは、アカウントに保存されます。上で述べたように、アカウントはユーザーによって所有され、すべてのアカウントには、常に`0x`で始まるアドレスが関連付けられています。Flowのプレイグラウンドの場合、`0x01`、`0x02`というように5つのアカウントが自動的に与えられています。

このように、スマートコントラクトはアドレス上に存在します。つまり、「Hello World」という名前のコントラクトをアカウント`0x01`にデプロイすると、このコントラクトはアドレスで識別されます。

このコントラクトと対話するには、コントラクトの名前とアドレスの両方を知らなければなりません。これについては、後ほどインポートするときに詳しく説明します。

### 話を例に戻すと...

この例では、スマートコントラクトをアカウント`0x01`にデプロイする予定です。これは、アカウント`0x01`がこのスマートコントラクトの所有者であることを意味します。現実世界では、自分のアカウントにスマートコントラクトをデプロイしますが、プレイグラウンドはシミュレーションの世界なので、好きなアカウントを選べるので、`0x01`を選択しました。

では、コントラクトを作ってみましょう。空いたスペースに、次のように入力します。

`pub contract HelloWorld {

    init() {

    }
}`

`pub contract [contract name]`には、常に新しい契約を作成するときに入力するものになります。`contract name`には、あなたがコントラクトを呼びたいものを何でも記入できます。

`init()` 関数は、すべてのコントラクトが必ず持っていなければならない関数です。この関数は、コントラクトが最初にデプロイされるときに呼び出されるもので、実際には一度しか発生しません。そのため、必要であればこの関数を使うことで初期化することができます。

これで最初のスマートコントラクトが完成です！ただし、このスマートコントラクトは何もしません ;( このコントラクトにデータを格納できるように、グリーティング変数を格納するようにしましょう。

コントラクトのコードを修正して、以下のようにします。

`pub contract HelloWorld {

    pub let greeting: String

    init() {
        self.greeting = "Hello, World!"
    }
}`

Cadenceでは、変数を宣言するとき、次のように実行します。

`[アクセス修飾子] [var/let] [変数名]: [型]`

上の例で言うと...

アクセス修飾子は`pub`で、誰でもこの変数を読むことができるという意味です。将来的には、他のアクセス修飾子もたくさん出てくるでしょうが、これからの数回のレッスンでは、簡単にするために`pub`にこだわってみましょう。
`let`は、この変数が定数であることを意味します。他のプログラミング言語でコーディングしたことがある人なら、定数というのは、この変数を一度何かに等しくすると、それを変更することができないことを意味します。一方、`var`は変更可能であることを意味します。
この変数の名前は`greeting`です。
この変数の型は文字列です。つまり、「こんにちは」、「ジェイコブは最高です」、「ジェイコブを愛しています」、そんな言葉を入れることができる。
次に、`self.greeting = "Hello, World!"` を`init()`関数の中に入れています。`init()`関数はコントラクトがデプロイされるときに必ず呼ばれます。また、`self`は、"一つ上の層の変数 "を意味するキーワードです。この場合、`self.greeting` はそのすぐ上で宣言した `greeting` 変数を参照しており、それを `"Hello, World!"` と等しい値に設定しています。

このコントラクトをデプロイするには、緑色の「Deploy」ボタンをクリックします。ページはこのように表示されるはずです。

![https://github.com/emerald-dao/beginner-cadence-course/raw/main/chapter2.0/images/helloworld.png](https://github.com/emerald-dao/beginner-cadence-course/raw/main/chapter2.0/images/helloworld.png)

注意: もしエラーが発生した場合は、まずページを更新してみてください。それでもまだ、次のようなエラーが表示される場合は、ページを更新してみてください。「GraphQL error "のようなエラーが表示される場合は、ブラウザをGoogle Chromeに切り替えてみてください。

やったー！あなたは最初のスマートコントラクトをデプロイしました。

## greetingの値を読む

greeting変数に実際に `"Hello, World!"`が設定されていることを確認しましょう。先ほどもご説明した通り、スクリプトを使ってブロックチェーンのデータを見ることができます。

左側の「Script Templates」の下にある「Script」というタブをクリックし、その中のものをすべて削除してください。次に、以下のコードを書きます。

`import HelloWorld from 0x01

pub fun main(): String {
    return HelloWorld.greeting
}`

このScriptは、greetingの値、つまり "Hello, World!"を返します。我々が書いたコードが何をしたのか詳しくみてみましょう。

1. まず、`import HelloWorld from 0x01`を実行し、スマートコントラクトをインポートしました。Cadenceでは、コントラクトをインポートするには… `import [コントラクト名] from [コントラクトのアドレス]`を実行する必要があります。
2. 次に関数を書きました。Cadenceでは、`[アクセス修飾子] fun [関数名]:[戻り値の型] { ... }`と書いて関数を書きます。 この場合、アクセス修飾子に `pub` を使い（詳細は後述）、関数名を `main` とし、返り値を `String` 型としました。（これは `greeting` の型のことです。）
3. そして、`HelloWorld.greeting` を使ってコントラクトから `greeting` 変数にアクセスしました。

右側の「実行」をクリックすると、ターミナルに以下のように "Hello, World!" と表示されるのがわかります。

![https://github.com/emerald-dao/beginner-cadence-course/raw/main/chapter2.0/images/hwscript.png](https://github.com/emerald-dao/beginner-cadence-course/raw/main/chapter2.0/images/hwscript.png)

このように表示されたら、最初のスクリプトが実行されたことになります。

## スマートコントラクトの概念を理解しよう

さて、コードが書き終わりました。速いですねぇでも、これが第1章1日目でお話ししたこととどう関係するのでしょうか？

スマートコントラクトはプログラムであり、ルールブックでもあると言いましたね。スマートコントラクトは僕達に一定のことを行うことを許可します、それ以上でもそれ以下でもありません。

今回の例では、スマートコントラクトによって、`greeting`の初期化と`greeting`の読み出しがができるようになっています。

しかし、`greeting`を他のものに変更することは絶対にできません。もしそのような機能を追加したければ、デプロイする前に前もってそうする必要があります。スマートコントラクト開発者とって最も重要なのは、コントラクトをデプロイする前にユーザーに持たせたい機能をすべて実装する必要があることです。なぜなら、デプロイした後にできることは何もないからです。

(もちろん、Flowのプレイグラウンドでは、コントラクトを再びデプロイすることができます。しかし、実際にはこのようなことはできません。)

## まとめ

今日は、最初のコントラクトをデプロイする方法、変数を宣言する方法、関数を書く方法、そしてスクリプトを実行する方法を学びました。すごい! それはたくさんありますね。でも、そんなに悪くはないでしょう？

## クエスト

今日のクエストでは、このレッスンで行ったのと同じように、[https://play.onflow.org](https://play.onflow.org/) にアクセスして新しいFlowプレイグラウンドをロードし、このプレイグラウンドを使ってコードを書いてください。

1. アカウント0x03に "JacobTucker "というコントラクトをデプロイし、そのコントラクトの中でisという名前の**定数**変数を宣言して、それをString型にします。コントラクトがデプロイされたら、この変数を "the best "に初期化してください。

2. 変数 `is` が実際に "the best" に等しいことを、その変数を読み込むスクリプトを実行して確認してください。出力のスクリーンショットを添付してください。

なんて素敵なクエストでしょう...

とにかく、答えを提出したら私がレビューできるように、何らかの方法で保存することを忘れないでください。グッドラック！！